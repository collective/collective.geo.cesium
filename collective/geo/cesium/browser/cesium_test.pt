<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="collective.geo.file">
<head>
    <metal:javascript_head fill-slot="javascript_head_slot">
      <metal:use use-macro="context/@@collectivegeo-macros/openlayers" />
    </metal:javascript_head>
</head>
<body>
  <metal:content-core fill-slot="content-core">
    <metal:content-core define-macro="content-core">
		<div id="cesiumContainer" class="fullSize"></div>
		<div id="loadingOverlay"><h1>Loading...</h1></div>
		<div id="toolbar"></div>
		<div id="dialog" title="Cesium and jQuery UI Demo"></div>
		<script type="text/javascript">
		/*<![CDATA[*/
		$(window).bind("load", function(){
			// Create canvas element using jQuery:
			$('<canvas/>', {
				'id': 'glCanvas',
				'class': 'fullSize'
			}).appendTo('#cesiumContainer');

			var canvas = $('#glCanvas')[0];
			var scene = new Cesium.Scene(canvas);
			var primitives = scene.getPrimitives();

			scene.skyAtmosphere = new Cesium.SkyAtmosphere();
			// Bing Maps
			var bing = new Cesium.BingMapsImageryProvider({
				url : 'http://dev.virtualearth.net',
				mapStyle : Cesium.BingMapsStyle.AERIAL,
				// Some versions of Safari support WebGL, but don't correctly implement
				// cross-origin image loading, so we need to load Bing imagery using a proxy.
				//proxy : Cesium.FeatureDetection.supportsCrossOriginImagery() ? undefined : new Cesium.DefaultProxy('/proxy/')
			});

			var ellipsoid = Cesium.Ellipsoid.WGS84;
			var centralBody = new Cesium.CentralBody(ellipsoid);
			centralBody.getImageryLayers().addImageryProvider(bing);

			primitives.setCentralBody(centralBody);

			var transitioner = new Cesium.SceneTransitioner(scene, ellipsoid);			
			
			function animate() {
				// INSERT CODE HERE to update primitives based on changes to animation time, camera parameters, etc.
			}

			function tick() {
				scene.initializeFrame();
				animate();
				scene.render();
				Cesium.requestAnimationFrame(tick);
			}
			tick();

			
			
			
		})
		/*]]*/
		</script>
    </metal:content-core>
  </metal:content-core>
</body>
</html>
